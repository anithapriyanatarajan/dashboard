import{j}from"./jsx-runtime-B0wN4eWF.js";import{u as Ct}from"./index-CbuwW4_d.js";import{u as z}from"./usePrefix-DVhi0s40.js";import{_ as E,a as Tt,b as $t,u as _t,c as Et,f as St,h as Dt,d as pe}from"./index-Cn2DnnuS.js";import{c as _}from"./index-7UTgOZSF.js";import{c as q,L as fe,b as Ke}from"./index-CjqBRizy.js";import{_ as t}from"./index-CvulwabO.js";import{R as l,r as p}from"./index-BLsgEXh-.js";import{i as We}from"./index-DhdmMkKS.js";import{a as Pe,f as Nt,g as kt}from"./bucket-3-igrvqujs.js";import{m as Vt}from"./mergeRefs-CTUecegF.js";import{F as vt}from"./FormContext-D3yeToZb.js";import{T as je}from"./Text-9nRGETFr.js";import{m as B,S as Lt,b as Ot,E as Rt,H as Ft,d as Wt}from"./keys-fZP-1wUt.js";import{a as Pt,W as jt}from"./bucket-18-D1v83Eua.js";import{k as Mt}from"./index-CfoIBI3E.js";import"./index-DS1rTf2F.js";import"./index-CTl86HqP.js";import"./index-yR6ZHKQV.js";import"./extends-CF3RwP-h.js";import"./Icon-Dlg6_ItC.js";var Me,Ae;const At={"clear.all":"Clear all selected items","clear.selection":"Clear selected item"};function Bt(n){return At[n]}function Ue(n){let{clearSelection:g,selectionCount:i,translateWithId:u=Bt,disabled:d,readOnly:r,onClearSelection:x,...S}=n;const m=z(),D=_(`${m}--list-box__selection`,{[`${m}--tag--filter`]:i,[`${m}--list-box__selection--multi`]:i}),b=u(i?"clear.all":"clear.selection"),R=_(`${m}--tag`,`${m}--tag--filter`,`${m}--tag--high-contrast`,{[`${m}--tag--disabled`]:d});function N(I){I.stopPropagation(),!(d||r)&&(g(I),x&&x(I))}return i?l.createElement("div",{className:R},l.createElement("span",{className:`${m}--tag__label`,title:i?.toString()},i),l.createElement("button",{"aria-label":b,className:`${m}--tag__close-icon`,disabled:d||r,onClick:N,tabIndex:-1,title:b,type:"button","aria-disabled":r?!0:void 0},Me||(Me=l.createElement(Pe,null)))):l.createElement("button",E({},S,{"aria-label":b,className:D,disabled:d||r,onClick:N,tabIndex:-1,title:b,type:"button","aria-disabled":r?!0:void 0}),Ae||(Ae=l.createElement(Pe,null)))}Ue.propTypes={clearSelection:t.func.isRequired,disabled:t.bool,readOnly:t.bool,onClearSelection:t.func,onClick:t.func,onMouseUp:t.func,onKeyDown:t.func,selectionCount:t.number,translateWithId:t.func};var Be;const qe={"close.menu":"close.menu","open.menu":"open.menu"},qt={[qe["close.menu"]]:"Close",[qe["open.menu"]]:"Open"},zt=n=>qt[n],Ge=l.forwardRef(function(g,i){let{isOpen:u,translateWithId:d=zt,...r}=g;const x=z(),S=_({[`${x}--list-box__menu-icon`]:!0,[`${x}--list-box__menu-icon--open`]:u}),m=d(u?"close.menu":"open.menu");return l.createElement("button",E({},r,{"aria-label":m,title:m,className:S,type:"button",tabIndex:-1,ref:i}),Be||(Be=l.createElement(Nt,null)))});Ge.propTypes={isOpen:t.bool.isRequired,translateWithId:t.func};const{InputBlur:Ht,InputKeyDownEnter:Kt,FunctionToggleMenu:Ut,ToggleButtonClick:Gt,ItemMouseMove:Jt,InputKeyDownArrowUp:Qt,InputKeyDownArrowDown:Xt,MenuMouseLeave:Yt}=q.stateChangeTypes,Je=n=>typeof n=="string"?n:typeof n=="number"?`${n}`:n!==null&&typeof n=="object"&&"label"in n&&typeof n.label=="string"?n.label:"",ze=()=>!0,ge=n=>{let{item:g,inputValue:i}=n;if(i===null||i==="")return!0;const u=g.toLowerCase(),d=i.toLowerCase();return u.startsWith(d)},He=n=>{let{initialSelectedItem:g,inputValue:i,itemToString:u,selectedItem:d,prevSelectedItem:r}=n;return d?u(d):g?u(g):!d&&r?"":i||""},Zt=(n,g)=>{let{items:i,itemToString:u=Je}=n;if(!g)return-1;const d=g.toLowerCase();for(let r=0;r<i.length;r++){const x=u(i[r]).toLowerCase();if(!i[r].disabled&&x.indexOf(d)!==-1)return r}return-1},be=p.forwardRef((n,g)=>{const i=p.useRef(0),u=p.useRef(null),{["aria-label"]:d="Choose an item",ariaLabel:r,autoAlign:x=!1,className:S,decorator:m,direction:D="bottom",disabled:b=!1,downshiftActions:R,downshiftProps:N,helperText:I,id:H,initialSelectedItem:M,invalid:k,invalidText:he,items:V,itemToElement:xe=null,itemToString:h=Je,light:Ye,onChange:y,onInputChange:ae,onToggleClick:Ie,placeholder:Ze,readOnly:F,selectedItem:C,shouldFilterItem:we=ze,size:et,titleText:le,translateWithId:ye,typeahead:K=!1,warn:U,warnText:Ce,allowCustomValue:v=!1,slug:G,...tt}=n,L=Tt("enable-v12-dynamic-floating-styles")||x,{refs:T,floatingStyles:Te,middlewareData:nt}=$t(L?{placement:D,strategy:"fixed",middleware:x?[St(),Dt()]:void 0,whileElementsMounted:Et}:{}),re=T?.reference?.current?.clientWidth;p.useEffect(()=>{if(L){const e={...Te,visibility:nt.hide?.referenceHidden?"hidden":"visible"};Object.keys(e).forEach(s=>{T.floating.current&&(T.floating.current.style[s]=e[s])}),re&&T.floating.current&&(T.floating.current.style.width=re+"px")}},[L,Te,T.floating,re]);const[a,J]=p.useState(He({initialSelectedItem:M,inputValue:"",itemToString:h,selectedItem:C})),[Q,X]=p.useState("");p.useEffect(()=>{if(K){if(a.length>=i.current)if(a){const e=V.filter(s=>ge({item:h(s),inputValue:a}));if(e.length>0){const s=h(e[0]);X(s.slice(a.length))}else X("")}else X("");else X("");i.current=a.length}},[K,a,V,h,ge]);const c=z(),{isFluid:ie}=p.useContext(vt),O=p.useRef(null),ce=_t(),[$e,st]=p.useState(!1),ue=p.useRef(ae),de=p.useRef(C);p.useEffect(()=>{if(de.current!==C){const e=He({initialSelectedItem:M,inputValue:a,itemToString:h,selectedItem:C,prevSelectedItem:de.current});a!==e&&(J(e),y({selectedItem:C,inputValue:e})),de.current=C}},[C]);const Y=(e,s,f)=>e.filter(o=>K?ge({item:s(o),inputValue:f}):we?we({item:o,itemToString:s,inputValue:f}):ze());p.useEffect(()=>{ue.current=ae},[ae]),p.useEffect(()=>{ue.current&&ue.current(a)},[a]);const ot=()=>{O?.current&&O.current.focus()},at=e=>Y(V,h,e||null),lt=e=>Zt({...n,items:at(e)},e),rt=p.useCallback((e,s)=>{const{type:f,changes:o}=s,{highlightedIndex:$}=o;switch(f){case Ht:{if(v&&$=="-1"){const me=a;return o.selectedItem=me,y&&y({selectedItem:a,inputValue:a}),o}return e.inputValue&&$=="-1"&&o.selectedItem?{...o,inputValue:h(o.selectedItem)}:e.inputValue&&$=="-1"&&!v&&!o.selectedItem?{...o,inputValue:""}:o}case Kt:return v?(J(a),ee(o.selectedItem),y&&y({selectedItem:o.selectedItem,inputValue:a}),o):o.selectedItem&&!v?o:{...o,isOpen:!0};case Ut:case Gt:return o.isOpen&&!o.selectedItem?{...o}:o;case Yt:return{...o,highlightedIndex:e.highlightedIndex};case Qt:case Xt:return $===-1?{...o,highlightedIndex:0}:o;case Jt:return{...o,highlightedIndex:e.highlightedIndex};default:return o}},[v,a,y]),it=e=>s=>{if(Ie&&Ie(s),F){s.preventDownshiftDefault=!0,s?.persist?.();return}s.target===O.current&&e&&(s.preventDownshiftDefault=!0,s?.persist?.())},_e=!k&&U,ct=_(`${c}--combo-box`,{[`${c}--combo-box--invalid--focused`]:k&&$e,[`${c}--list-box--up`]:D==="top",[`${c}--combo-box--warning`]:_e,[`${c}--combo-box--readonly`]:F,[`${c}--autoalign`]:L}),ut=_(`${c}--label`,{[`${c}--label--disabled`]:b}),Ee=`combobox-helper-text-${ce}`,Se=`combobox-warn-text-${ce}`,De=`combobox-invalid-text-${ce}`,dt=_(`${c}--form__helper-text`,{[`${c}--form__helper-text--disabled`]:b}),mt=_(`${c}--list-box__wrapper`,[S,{[`${c}--list-box__wrapper--fluid--invalid`]:ie&&k,[`${c}--list-box__wrapper--slug`]:G,[`${c}--list-box__wrapper--decorator`]:m}]),pt=_(`${c}--text-input`,{[`${c}--text-input--empty`]:!a,[`${c}--combo-box--input--focus`]:$e}),Ne=xe;let W=l.isValidElement(G??m)?G??m:null;W&&W.type?.displayName==="AILabel"&&(W=l.cloneElement(W,{size:"mini"}));const{getInputProps:ft,getItemProps:gt,getLabelProps:bt,getMenuProps:ke,getToggleButtonProps:ht,isOpen:w,highlightedIndex:Z,selectedItem:Ve,closeMenu:ve,openMenu:Le,reset:Oe,selectItem:A,setHighlightedIndex:ee,setInputValue:te,toggleMenu:P}=q({items:Y(V,h,a),inputValue:a,itemToString:e=>h(e),onInputValueChange(e){let{inputValue:s}=e;const f=s||"";J(f),ee(lt(f))},onHighlightedIndexChange:e=>{let{highlightedIndex:s}=e;if(s>-1&&typeof window!==void 0){const o=document.querySelectorAll(`li.${c}--list-box__menu-item[role="option"]`)[s];o&&o.scrollIntoView({behavior:"smooth",block:"nearest"})}},onStateChange:e=>{let{type:s,selectedItem:f}=e;s===q.stateChangeTypes.ItemClick&&!We(C,f)&&y({selectedItem:f}),(s===q.stateChangeTypes.FunctionSelectItem||s===q.stateChangeTypes.InputKeyDownEnter)&&!We(C,f)&&y({selectedItem:f})},initialSelectedItem:M,inputId:H,stateReducer:rt,isItemDisabled(e,s){return e?.disabled},...N});p.useEffect(()=>{R&&(R.current={closeMenu:ve,openMenu:Le,reset:Oe,selectItem:A,setHighlightedIndex:ee,setInputValue:te,toggleMenu:P})},[ve,Le,Oe,A,ee,te,P]);const xt=ht({disabled:b||F,onClick:it(w),onMouseUp(e){w&&e.stopPropagation()}}),Re=e=>{st(e.type==="focus")},It=F?{onKeyDown:e=>{e.key!=="Tab"&&e.preventDefault()},onClick:e=>{e.preventDefault(),e.currentTarget.focus()}}:{},wt=k&&he&&De||U&&Ce&&Se||I&&!ie&&Ee||void 0,Fe=p.useMemo(()=>ke({ref:L?T.setFloating:null}),[L,r,d,ke,T.setFloating]);return p.useEffect(()=>{if(O.current&&u.current&&Q){const e=a.length,s=e+Q.length;u.current.value=a+Q,u.current.setSelectionRange(e,s)}},[a,Q]),l.createElement("div",{className:mt},le&&l.createElement(je,E({as:"label",className:ut},bt()),le),l.createElement(fe,{onFocus:Re,onBlur:Re,className:ct,disabled:b,invalid:k,invalidText:he,invalidTextId:De,isOpen:w,light:Ye,size:et,warn:U,ref:L?T.setReference:null,warnText:Ce,warnTextId:Se},l.createElement("div",{className:`${c}--list-box__field`},l.createElement("input",E({disabled:b,className:pt,type:"text",tabIndex:0,"aria-haspopup":"listbox",title:O?.current?.value},ft({"aria-label":le?void 0:r||d,"aria-controls":w?void 0:Fe.id,placeholder:Ze,value:a,onChange:e=>{const s=e.target.value;J(s),te(s)},ref:Vt(O,g,u),onKeyDown:e=>{if(B(e,Lt)&&e.stopPropagation(),B(e,Ot)&&(!a||v)&&(P(),Z!==-1&&A(Y(V,h,a)[Z]),v&&w&&a&&Z===-1&&y({selectedItem:null,inputValue:a}),e.preventDownshiftDefault=!0,e?.persist?.()),B(e,Rt)&&a&&e.target===O.current&&w&&(P(),e.preventDownshiftDefault=!0,e?.persist?.()),B(e,Ft)&&e.code!=="Numpad7"&&e.target.setSelectionRange(0,0),B(e,Wt)&&e.code!=="Numpad1"&&e.target.setSelectionRange(e.target.value.length,e.target.value.length),e.altKey&&e.key=="ArrowDown"&&(e.preventDownshiftDefault=!0,w||P()),e.altKey&&e.key=="ArrowUp"&&(e.preventDownshiftDefault=!0,w&&P()),K&&e.key==="Tab"){const s=V.find(f=>h(f).toLowerCase().startsWith(a.toLowerCase()));if(s){const f=h(s);te(f),A(s)}}}}),tt,It,{readOnly:F,"aria-describedby":wt})),k&&l.createElement(Pt,{className:`${c}--list-box__invalid-icon`}),_e&&l.createElement(jt,{className:`${c}--list-box__invalid-icon ${c}--list-box__invalid-icon--warning`}),a&&l.createElement(Ue,{clearSelection:()=>{A(null)},translateWithId:ye,disabled:b||F,onClearSelection:ot,selectionCount:0}),l.createElement(Ge,E({},xt,{isOpen:w,translateWithId:ye}))),G?W:m?l.createElement("div",{className:`${c}--list-box__inner-wrapper--decorator`},W):"",l.createElement(fe.Menu,Fe,w?Y(V,h,a).map((e,s)=>{const o=e!==null&&typeof e=="object"&&"text"in e&&xe?e.text?.toString():h(e),$=gt({item:e,index:s}),me=$["aria-disabled"],{"aria-disabled":sn,...yt}=$;return l.createElement(fe.MenuItem,E({key:$.id,isActive:Ve===e,isHighlighted:Z===s,title:o,disabled:me},yt),Ne?l.createElement(Ne,E({key:$.id},e)):h(e),Ve===e&&l.createElement(kt,{className:`${c}--list-box__menu-item__selected-icon`}))}):null)),I&&!k&&!U&&!ie&&l.createElement(je,{as:"div",id:Ee,className:dt},I))});be.displayName="ComboBox";be.propTypes={allowCustomValue:t.bool,"aria-label":t.string,ariaLabel:pe(t.string),autoAlign:t.bool,className:t.string,decorator:t.node,direction:t.oneOf(["top","bottom"]),disabled:t.bool,downshiftProps:t.object,downshiftActions:t.exact({current:t.any}),helperText:t.node,id:t.string.isRequired,initialSelectedItem:t.oneOfType([t.object,t.string,t.number]),invalid:t.bool,invalidText:t.node,itemToElement:t.func,itemToString:t.func,items:t.array.isRequired,light:pe(t.bool),onChange:t.func.isRequired,onInputChange:t.func,onToggleClick:t.func,placeholder:t.string,readOnly:t.bool,selectedItem:t.oneOfType([t.object,t.string,t.number]),shouldFilterItem:t.func,size:Ke,slug:pe(t.node),titleText:t.node,translateWithId:t.func,typeahead:t.bool,warn:t.bool,warnText:t.node};const Qe=n=>{let{className:g,size:i,hideLabel:u,...d}=n;const r=z(),x=_(g,`${r}--skeleton`,`${r}--form-item`,{[`${r}--list-box--${i}`]:i});return l.createElement("div",E({className:x},d),!u&&l.createElement("span",{className:`${r}--label ${r}--skeleton`}),l.createElement("div",{className:`${r}--skeleton ${r}--dropdown`}))};Qe.propTypes={className:t.string,hideLabel:t.bool,size:Ke};const en=n=>n?n.text:"",tn=n=>typeof n=="string"?{id:n,text:n}:n,nn={items:[]},Xe=({className:n,disabled:g,emptyText:i,id:u,items:d=nn.items,label:r,loading:x=!1,onChange:S,selectedItem:m,size:D="md",titleText:b,...R})=>{const N=Ct(),I=z();if(x)return j.jsxs("div",{className:`${I}--list-box__wrapper`,children:[b&&j.jsx("span",{className:`${I}--label`,children:b}),j.jsx(Qe,{className:`${I}--combo-box ${I}--list-box ${I}--list-box--${D} ${n||""}`,hideLabel:!0,id:u})]});const H=d.map(tn),M=i||N.formatMessage({id:"dashboard.tooltipDropdown.empty",defaultMessage:"No items found"});return j.jsx(be,{className:n,disabled:g,id:u,items:H,itemToString:en,onChange:S,placeholder:H.length===0?M:r,selectedItem:m,size:D,titleText:b,translateWithId:Mt(N),...R})};Xe.__docgenInfo={description:"",methods:[],displayName:"TooltipDropdown",props:{items:{defaultValue:{value:"[]",computed:!1},required:!1},loading:{defaultValue:{value:"false",computed:!1},required:!1},size:{defaultValue:{value:"'md'",computed:!1},required:!1}}};const En={args:{id:"tooltip-dropdown-id",label:"Select an item",items:["item 1","item 2","item 3","item 4","item 5","item 6"],loading:!1,onChange:()=>{},titleText:""},component:Xe,decorators:[n=>j.jsx("div",{style:{width:"200px"},children:j.jsx(n,{})})],title:"TooltipDropdown"},ne={},se={args:{loading:!0}},oe={args:{items:[]}};ne.parameters={...ne.parameters,docs:{...ne.parameters?.docs,source:{originalSource:"{}",...ne.parameters?.docs?.source}}};se.parameters={...se.parameters,docs:{...se.parameters?.docs,source:{originalSource:`{
  args: {
    loading: true
  }
}`,...se.parameters?.docs?.source}}};oe.parameters={...oe.parameters,docs:{...oe.parameters?.docs,source:{originalSource:`{
  args: {
    items: []
  }
}`,...oe.parameters?.docs?.source}}};const Sn=["Default","Loading","Empty"];export{ne as Default,oe as Empty,se as Loading,Sn as __namedExportsOrder,En as default};
