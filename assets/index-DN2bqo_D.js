import{a as k,b as rt,o as nt,f as st,n as at,h as it,_ as D,c as lt}from"./index-Cn2DnnuS.js";import{c as x}from"./index-7UTgOZSF.js";import{_ as t}from"./index-CvulwabO.js";import{r as l,R as c}from"./index-BLsgEXh-.js";import{u as O}from"./usePrefix-DVhi0s40.js";const ct=typeof window<"u"?l.useLayoutEffect:l.useEffect;var ut=ct;const F={};function pt(e,n,r){return function(f,s,a){if(f[s]!==void 0){if(!F[a]||!F[a][s]){F[a]={...F[a],[s]:!0};const u=f[s],S=r?r(u):null;n&&!n.includes(u)&&(r?`${u}${s}${a}${S}${u}`:`${u}${s}${a}${n.join(", ")}${u}`)}for(var h=arguments.length,g=new Array(h>3?h-3:0),y=3;y<h;y++)g[y-3]=arguments[y];return e(f,s,a,...g)}}}const V=e=>l.useCallback(n=>{e.forEach(r=>{typeof r=="function"?r(n):r!=null&&(r.current=n)})},e);function Et(e,n,r){const i=l.useRef(null);l.useEffect(()=>{i.current=r},[r]),l.useEffect(()=>{const f=a=>{i.current&&i.current(a)},s="current"in e?e.current:e;return s?.addEventListener?.(n,f),()=>{s?.removeEventListener?.(n,f)}},[e,n])}function j(e,n){const r=l.useRef(null);l.useEffect(()=>{r.current=n},[n]),l.useEffect(()=>{function i(f){r.current&&r.current(f)}return window.addEventListener(e,i),()=>{window.removeEventListener(e,i)}},[e])}function ft(e){switch(e){case"top-left":return"top-start";case"top-right":return"top-end";case"bottom-left":return"bottom-start";case"bottom-right":return"bottom-end";case"left-bottom":return"left-end";case"left-top":return"left-start";case"right-bottom":return"right-end";case"right-top":return"right-start";default:return e}}const W=c.createContext({setFloating:{current:null},caretRef:{current:null},autoAlign:null}),dt=e=>({"top-left":"top-start","top-right":"top-end","bottom-left":"bottom-start","bottom-right":"bottom-end","left-bottom":"left-end","left-top":"left-start","right-bottom":"right-end","right-top":"right-start"})[e],mt=c.forwardRef(function(n,r){let{isTabTip:i,align:f=i?"bottom-start":"bottom",as:s="span",autoAlign:a=!1,autoAlignBoundary:h,caret:g=!i,className:y,children:u,dropShadow:S=!0,highContrast:M=!1,onRequestClose:B,open:N,alignmentAxisOffset:U,..._}=n;const m=O(),z=l.useRef(null),v=l.useRef(null),A=l.useRef(null),b=k("enable-v12-dynamic-floating-styles")||a;let $=ft(f);j("blur",()=>{N&&B?.()}),j("click",p=>{N&&!A?.current?.contains(p.target)&&B?.()});const G=c.Children.toArray(u).some(p=>p?.props?.className?.includes("slug")||p?.props?.className?.includes("ai-label"))?7:6,R=l.useRef({offset:10,caretHeight:G});ut(()=>{if(g&&A.current){const p=window.getComputedStyle(A.current,null),o=p.getPropertyValue("--cds-popover-offset"),d=p.getPropertyValue("--cds-popover-caret-height");o&&(R.current.offset=o.includes("px")?Number(o.split("px",1)[0])*1:Number(o.split("rem",1)[0])*16),d&&(R.current.caretHeight=d.includes("px")?Number(d.split("px",1)[0])*1:Number(d.split("rem",1)[0])*16)}});const{refs:E,floatingStyles:H,placement:T,middlewareData:C}=rt(b?{placement:$,strategy:"fixed",middleware:[nt(i?0:{alignmentAxis:U,mainAxis:R?.current?.offset}),a&&st({fallbackPlacements:$.includes("bottom")?["bottom","bottom-start","bottom-end","right","right-start","right-end","left","left-start","left-end","top","top-start","top-end"]:["top","top-start","top-end","left","left-start","left-end","right","right-start","right-end","bottom","bottom-start","bottom-end"],fallbackStrategy:"initialPlacement",fallbackAxisSideDirection:"start",boundary:h}),at({element:v}),a&&it()],whileElementsMounted:lt}:{}),J=l.useMemo(()=>({floating:z,setFloating:E.setFloating,caretRef:v,autoAlign:a}),[E.setFloating,a]);i&&(["bottom-start","bottom-end"].includes($)||($="bottom-start")),l.useEffect(()=>{if(b){const p={...H,visibility:C.hide?.referenceHidden?"hidden":"visible"};if(Object.keys(p).forEach(o=>{E.floating.current&&(E.floating.current.style[o]=p[o])}),g&&C&&C.arrow&&v?.current){const{x:o,y:d}=C.arrow,P={top:"bottom",right:"left",bottom:"top",left:"right"}[T.split("-")[0]];v.current.style.left=o!=null?`${o}px`:"",v.current.style.top=d!=null?`${d}px`:"",v.current.style.right="",v.current.style.bottom="",P&&(v.current.style[P]=`${-R?.current?.caretHeight}px`)}}},[H,E.floating,b,C,T,g]);const K=V([r,A]),Q=a&&T!==$?T:$,X=x({[`${m}--popover-container`]:!0,[`${m}--popover--caret`]:g,[`${m}--popover--drop-shadow`]:S,[`${m}--popover--high-contrast`]:M,[`${m}--popover--open`]:N,[`${m}--popover--auto-align ${m}--autoalign`]:b,[`${m}--popover--${Q}`]:!0,[`${m}--popover--tab-tip`]:i},y),Y=c.Children.map(u,p=>{const o=p,d=o?.type?.displayName,P=o?.type==="button",tt=b&&d&&["ToggletipButton"].includes(d),et=b&&!["ToggletipContent","PopoverContent"].includes(d);if(c.isValidElement(o)&&(P||tt||et)){const L=o?.props?.className,w=(o?.props).ref,ot=x(`${m}--popover--tab-tip__button`,L);return c.cloneElement(o,{className:i&&o?.type==="button"?ot:L||"",ref:q=>{(b&&o?.type?.displayName!=="PopoverContent"||b&&o?.type?.displayName==="ToggletipButton")&&E.setReference(q),typeof w=="function"?w(q):w!=null&&(w.current=q)}})}else return o}),Z=s;return c.createElement(W.Provider,{value:J},c.createElement(Z,D({},_,{className:X,ref:K}),b||i?Y:u))});mt.propTypes={align:pt(t.oneOf(["top","top-left","top-right","bottom","bottom-left","bottom-right","left","left-bottom","left-top","right","right-bottom","right-top","top-start","top-end","bottom-start","bottom-end","left-end","left-start","right-end","right-start"]),["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end"],dt),as:t.oneOfType([t.string,t.elementType]),autoAlign:t.bool,autoAlignBoundary:t.oneOfType([t.oneOf(["clippingAncestors"]),t.elementType,t.arrayOf(t.elementType),t.exact({x:t.number.isRequired,y:t.number.isRequired,width:t.number.isRequired,height:t.number.isRequired})]),caret:t.bool,children:t.node,className:t.string,dropShadow:t.bool,highContrast:t.bool,isTabTip:t.bool,onRequestClose:t.func,open:t.bool.isRequired};function gt(e,n){let{className:r,children:i,...f}=e;const s=O(),{setFloating:a,caretRef:h,autoAlign:g}=c.useContext(W),y=V([a,n]),u=k("enable-v12-dynamic-floating-styles")||g;return c.createElement("span",D({},f,{className:`${s}--popover`}),c.createElement("span",{className:x(`${s}--popover-content`,r),ref:y},i,u&&c.createElement("span",{className:x({[`${s}--popover-caret`]:!0,[`${s}--popover--auto-align`]:!0}),ref:h})),!u&&c.createElement("span",{className:x({[`${s}--popover-caret`]:!0}),ref:h}))}const I=c.forwardRef(gt);I.displayName="PopoverContent";I.propTypes={children:t.node,className:t.string};export{mt as P,I as a,V as b,Et as c,pt as d,j as e,ut as u};
