import{j as e}from"./jsx-runtime-B0wN4eWF.js";import{u as R}from"./index-CbuwW4_d.js";import{u as k}from"./usePrefix-DVhi0s40.js";import{_ as x}from"./index-Cn2DnnuS.js";import{_ as t}from"./index-CvulwabO.js";import{r as h,R as f}from"./index-BLsgEXh-.js";import{c as C}from"./index-7UTgOZSF.js";import{c as N}from"./events-OVwOsPzJ.js";import{I as L}from"./index-mhCn_TNf.js";import{n as y}from"./noopFn-g4z370MD.js";import{d as j}from"./index-DN2bqo_D.js";import{d as D}from"./debounce-DBudwqRe.js";import{L as I}from"./index-BIJfH8ZR.js";import{C as O}from"./bucket-4-BNyHiU9t.js";import{h as S}from"./index-CfoIBI3E.js";import{F as H}from"./FormattedDate-BAqjGlH3.js";const P=o=>({"top-left":"top-start","top-right":"top-end","bottom-left":"bottom-start","bottom-right":"bottom-end","left-bottom":"left-end","left-top":"left-start","right-bottom":"right-end","right-top":"right-start"})[o];function E(o){let{align:s="bottom",autoAlign:r=!1,children:i,className:n,feedback:l="Copied!",feedbackTimeout:d=2e3,onAnimationEnd:c,onClick:p=y,...a}=o;const[m,u]=h.useState(""),g=k(),_=C(n,`${g}--copy`,{[`${g}--copy-btn--animating`]:m,[`${g}--copy-btn--${m}`]:m}),b=h.useCallback(D(()=>{u("fade-out")},d),[d]),$=h.useCallback(()=>{u("fade-in"),b()},[b]),F=v=>{v.animationName===`${g}--hide-feedback`&&u("")};h.useEffect(()=>()=>{b.cancel()},[b]);const T=a["aria-label"]??"";return f.createElement(L,x({closeOnActivation:!1,align:s,autoAlign:r,className:_,label:m?l:T,onClick:N([p,$]),onAnimationEnd:N([c,F])},a,{"aria-label":!i&&(m?l:a["aria-label"])||void 0}),i)}E.propTypes={align:j(t.oneOf(["top","top-left","top-right","bottom","bottom-left","bottom-right","left","left-bottom","left-top","right","right-bottom","right-top","top-start","top-end","bottom-start","bottom-end","left-end","left-start","right-end","right-start"]),["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end"],P),autoAlign:t.bool,children:t.node,className:t.string,feedback:t.string,feedbackTimeout:t.number,onAnimationEnd:t.func,onClick:t.func};const B=o=>({"top-left":"top-start","top-right":"top-end","bottom-left":"bottom-start","bottom-right":"bottom-end","left-bottom":"left-end","left-top":"left-start","right-bottom":"right-end","right-top":"right-start"})[o];function A(o){let{align:s="bottom",autoAlign:r=!1,feedback:i="Copied!",feedbackTimeout:n=2e3,iconDescription:l="Copy to clipboard",className:d,onClick:c=y,...p}=o;const a=k();return f.createElement(I,{size:{default:"md",max:"lg"}},f.createElement(E,x({feedback:i,feedbackTimeout:n,onClick:c,align:s,autoAlign:r,className:C(d,`${a}--copy-btn`),"aria-label":l},p),f.createElement(O,{className:`${a}--snippet__icon`})))}A.propTypes={align:j(t.oneOf(["top","top-left","top-right","bottom","bottom-left","bottom-right","left","left-bottom","left-top","right","right-bottom","right-top","top-start","top-end","bottom-start","bottom-end","left-end","left-start","right-end","right-start"]),["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end"],B),autoAlign:t.bool,className:t.string,feedback:t.string,feedbackTimeout:t.number,iconDescription:t.string,onClick:t.func};const M=o=>{let{className:s,...r}=o;const i=k(),n=C({[`${i}--skeleton__placeholder`]:!0},s);return f.createElement("div",x({className:n},r))};M.propTypes={className:t.string};function W({children:o,icon:s,lastTransitionTime:r,loading:i,message:n,runName:l,reason:d,status:c,triggerHeader:p}){const a=R();function m(){S(n)}return e.jsx("header",{className:"tkn--pipeline-run-header","data-succeeded":c,"data-reason":d,children:i?e.jsx(M,{className:"tkn--header-skeleton",title:a.formatMessage({id:"dashboard.loading",defaultMessage:"Loadingâ€¦"})}):l&&e.jsxs(e.Fragment,{children:[e.jsxs("h1",{className:"tkn--run-header--heading",children:[e.jsx("div",{className:"tkn--run-name",title:l,children:l}),s,e.jsx("span",{className:"tkn--time",children:r?a.formatMessage({id:"dashboard.lastUpdated",defaultMessage:"Last updated {time}"},{time:e.jsx(H,{date:r,relative:!0})}):null}),o]}),e.jsxs("div",{className:"tkn--status",children:[e.jsx("span",{className:"tkn--status-label",children:d}),n&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"tkn--status-message",title:n,children:n}),e.jsx(A,{feedback:a.formatMessage({id:"dashboard.clipboard.copied",defaultMessage:"Copied!"}),iconDescription:a.formatMessage({id:"dashboard.clipboard.copyStatusMessage",defaultMessage:"Copy status message to clipboard"}),onClick:m})]})]}),p]})})}W.__docgenInfo={description:"",methods:[],displayName:"RunHeader"};export{W as R};
