import{j as e}from"./jsx-runtime-B0wN4eWF.js";import{_ as d}from"./index-CvulwabO.js";import{u as S}from"./index-CbuwW4_d.js";import{a as R,g as C}from"./index-CfoIBI3E.js";import"./usePrefix-DVhi0s40.js";import{T as V,a as D,b as r,c as M,d as l}from"./Tabs-4y_hjRYw.js";import{D as v}from"./DetailsHeader-B1o2hUA4.js";import{L as w}from"./Log-CuX5kE6N.js";import{S as y}from"./StepDefinition-p1dHpIVX.js";const p=["logs","details"],u={onViewChange:()=>{},taskRun:{}},c=({definition:m,logContainer:f,onViewChange:h=u.onViewChange,skippedTask:g,stepName:x,stepStatus:t,taskRun:n=u.taskRun,view:b})=>{const a=S(),{exitCode:i,reason:j,status:o}=R(t),k=C(n).reason==="TaskRunCancelled"&&o!=="terminated"?"cancelled":o;let s=p.indexOf(b);return s===-1&&(s=0),e.jsxs("div",{className:"tkn--step-details",children:[e.jsx(v,{displayName:x,exitCode:i,hasWarning:i!==0,reason:j,status:k,stepStatus:t,taskRun:n}),e.jsxs(V,{onChange:T=>h(p[T.selectedIndex]),selectedIndex:s,children:[e.jsxs(D,{activation:"manual","aria-label":"Step details",children:[e.jsx(r,{children:a.formatMessage({id:"dashboard.taskRun.logs",defaultMessage:"Logs"})}),e.jsx(r,{children:a.formatMessage({id:"dashboard.resource.detailsTab",defaultMessage:"Details"})})]}),e.jsxs(M,{children:[e.jsx(l,{children:s===0&&g?e.jsx(w,{fetchLogs:()=>a.formatMessage({id:"dashboard.taskRun.logs.skipped",defaultMessage:"This step did not run as the task was skipped. See task status for more details."})}):f}),e.jsx(l,{children:s===1&&e.jsx(y,{definition:m})})]})]})]})};c.propTypes={onViewChange:d.func,taskRun:d.shape({})};c.__docgenInfo={description:"",methods:[],displayName:"StepDetails",props:{onViewChange:{defaultValue:{value:"() => {}",computed:!1},description:"",type:{name:"func"},required:!1},taskRun:{defaultValue:{value:"{}",computed:!1},description:"",type:{name:"shape",value:{}},required:!1}}};export{c as S};
