import{j as R}from"./jsx-runtime-B0wN4eWF.js";import{R as n,r as s}from"./index-BLsgEXh-.js";import{u as ie}from"./index-CbuwW4_d.js";import{u as B}from"./usePrefix-DVhi0s40.js";import{B as ee}from"./Button-DXQXyzWq.js";import{_ as D,b as te,i as ce,j as de,k as ue,l as me,o as fe,c as ne,a as pe,u as ge,s as he,f as be}from"./index-Cn2DnnuS.js";import{c as _}from"./index-7UTgOZSF.js";import{_ as t}from"./index-CvulwabO.js";import{u as ae}from"./useControllableState-BPNuw5M3.js";import{b as xe}from"./index-DN2bqo_D.js";import{M as V,u as we,b as oe,c as ye,O as Ce,a as Ee}from"./index-CLdR1d0e.js";import{T as Ie}from"./Text-9nRGETFr.js";import{m as H,A as ke,b as Me,S as Re}from"./keys-fZP-1wUt.js";import{I as O}from"./Icon-Dlg6_ItC.js";import{g as se,f as Ne}from"./bucket-3-igrvqujs.js";import{m as ve}from"./mergeRefs-CTUecegF.js";import{M as _e}from"./Modal-BjzrrbgF.js";var J,Q,W,X;const Se=n.forwardRef(function(f,a){let{children:r,size:e=16,...l}=f;return e==="glyph"||e==="glyph"||e==="glyphpx"?n.createElement(O,{width:e,height:e,ref:a,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 5 8",fill:"currentColor",...l},J||(J=n.createElement("path",{d:"M5 8L0 4 5 0z"})),r):n.createElement(O,{width:e,height:e,ref:a,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",...l},Q||(Q=n.createElement("path",{d:"M20 24L10 16 20 8z"})),r)}),Te=n.forwardRef(function(f,a){let{children:r,size:e=16,...l}=f;return e==="glyph"||e==="glyph"||e==="glyphpx"?n.createElement(O,{width:e,height:e,ref:a,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 5 8",fill:"currentColor",...l},W||(W=n.createElement("path",{d:"M0 0L5 4 0 8z"})),r):n.createElement(O,{width:e,height:e,ref:a,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",...l},X||(X=n.createElement("path",{d:"M12 8L22 16 12 24z"})),r)});var Y,Z;const j=s.forwardRef(function(f,a){let{children:r,className:e,disabled:l,kind:h="default",label:y,onClick:b,renderIcon:p,shortcut:C,...i}=f;const[c,u]=s.useState(!1),[d,g]=s.useState(!1),{refs:m,floatingStyles:o,context:x}=te({open:c,onOpenChange:u,placement:d?"left-start":"right-start",whileElementsMounted:ne,middleware:[fe({mainAxis:-6,crossAxis:-6})]}),{getReferenceProps:k,getFloatingProps:S}=ce([de(x,{delay:100,enabled:!0,handleClose:ue({requireIntent:!1})})]),N=B(),v=s.useContext(V),I=s.useRef(null),z=xe([a,I,m.setReference]),M=!!r,A=l&&!M,F=h==="danger"&&!M;function q(){v.dispatch({type:"registerItem",payload:{ref:I,disabled:!!l}})}function $(){I.current&&u(!0)}function L(){u(!1)}function T(E){A||(M?$():(v.state.requestCloseRoot(E),b&&b(E)))}function P(E){M&&H(E,ke)&&($(),E.stopPropagation()),(H(E,Me)||H(E,Re))&&T(E),i.onKeyDown&&i.onKeyDown(E)}const K=_(e,`${N}--menu-item`,{[`${N}--menu-item--disabled`]:A,[`${N}--menu-item--danger`]:F});s.useEffect(()=>{q()},[]);const{direction:U}=we();s.useEffect(()=>{document?.dir==="rtl"||U==="rtl"?g(!0):g(!1)},[U]);const G=v.state.mode==="basic"||i.role==="menuitemcheckbox"||i.role==="menuitemradio";return s.useEffect(()=>{G&&p&&!v.state.hasIcons&&v.dispatch({type:"enableIcons"})},[G,p,v.state.hasIcons,v]),s.useEffect(()=>{Object.keys(o).forEach(E=>{m.floating.current&&E!=="position"&&(m.floating.current.style[E]=o[E])})},[o,m.floating]),n.createElement(me,{context:x,order:["reference","floating"],modal:!1},n.createElement("li",D({role:"menuitem"},i,{ref:z,className:K,tabIndex:-1,"aria-disabled":A??void 0,"aria-haspopup":M??void 0,"aria-expanded":M?c:void 0,onClick:T,onKeyDown:P},k()),n.createElement("div",{className:`${N}--menu-item__icon`},G&&p&&n.createElement(p,null)),n.createElement(Ie,{as:"div",className:`${N}--menu-item__label`,title:y},y),C&&!M&&n.createElement("div",{className:`${N}--menu-item__shortcut`},C),M&&n.createElement(n.Fragment,null,n.createElement("div",{className:`${N}--menu-item__shortcut`},d?Y||(Y=n.createElement(Se,null)):Z||(Z=n.createElement(Te,null))),n.createElement(oe,D({label:y,open:c,onClose:()=>{L(),I.current?.focus()},ref:m.setFloating},S()),r))))});j.propTypes={children:t.node,className:t.string,disabled:t.bool,kind:t.oneOf(["default","danger"]),label:t.string.isRequired,onClick:t.func,renderIcon:t.oneOfType([t.func,t.object]),shortcut:t.string};const De=s.forwardRef(function(f,a){let{className:r,defaultSelected:e,label:l,onChange:h,selected:y,...b}=f;const p=B(),C=s.useContext(V);C.state.mode;const[i,c]=ae({value:y,onChange:h,defaultValue:e??!1});function u(g){c(!i)}s.useEffect(()=>{C.state.hasIcons||C.dispatch({type:"enableIcons"})},[C.state.hasIcons,C]);const d=_(r,`${p}--menu-item-selectable--selected`);return n.createElement(j,D({},b,{ref:a,label:l,className:d,role:"menuitemcheckbox","aria-checked":i,renderIcon:i?se:void 0,onClick:u}))});De.propTypes={className:t.string,defaultSelected:t.bool,label:t.string.isRequired,onChange:t.func,selected:t.bool};const Be=s.forwardRef(function(f,a){let{children:r,className:e,label:l,...h}=f;const y=B(),b=_(e,`${y}--menu-item-group`);return n.createElement("li",{className:b,role:"none",ref:a},n.createElement("ul",D({},h,{role:"group","aria-label":l}),r))});Be.propTypes={children:t.node,className:t.string,label:t.string.isRequired};const Ae=w=>w.toString(),$e=s.forwardRef(function(f,a){let{className:r,defaultSelectedItem:e,items:l,itemToString:h=Ae,label:y,onChange:b,selectedItem:p,...C}=f;const i=B(),c=s.useContext(V);c.state.mode;const[u,d]=ae({value:p,onChange:b,defaultValue:e});function g(o,x){d(o)}s.useEffect(()=>{c.state.hasIcons||c.dispatch({type:"enableIcons"})},[c.state.hasIcons,c]);const m=_(r,`${i}--menu-item-radio-group`);return n.createElement("li",{className:m,role:"none",ref:a},n.createElement("ul",D({},C,{role:"group","aria-label":y}),l.map((o,x)=>n.createElement(j,{key:x,label:h(o),role:"menuitemradio","aria-checked":o===u,renderIcon:o===u?se:void 0,onClick:k=>{g(o)}}))))});$e.propTypes={className:t.string,defaultSelectedItem:t.any,itemToString:t.func,items:t.array,label:t.string.isRequired,onChange:t.func,selectedItem:t.any};const re=s.forwardRef(function(f,a){let{className:r,...e}=f;const l=B(),h=_(r,`${l}--menu-item-divider`);return n.createElement("li",D({},e,{className:h,role:"separator",ref:a}))});re.propTypes={className:t.string};const Oe=["primary","tertiary","ghost"],je="primary",le=s.forwardRef(function(f,a){let{children:r,className:e,disabled:l,kind:h=je,label:y,size:b="lg",menuAlignment:p="bottom",tabIndex:C=0,menuTarget:i,...c}=f;const u=pe("enable-v12-dynamic-floating-styles"),d=ge("MenuButton"),g=B(),m=s.useRef(null);let o=[];u||(o=[be({crossAxis:!1})]),(p==="bottom"||p==="top")&&o.push(he({apply(T){let{rects:P,elements:K}=T;Object.assign(K.floating.style,{width:`${P.reference.width}px`})}}));const{refs:x,floatingStyles:k,placement:S,middlewareData:N}=te({placement:p,strategy:"fixed",middleware:o,whileElementsMounted:ne}),v=ve(a,m),{open:I,handleClick:z,handleMousedown:M,handleClose:A}=ye(m);s.useLayoutEffect(()=>{Object.keys(k).forEach(T=>{x.floating.current&&(x.floating.current.style[T]=k[T])})},[k,x.floating,N,S,I]);function F(){m.current&&z()}const q=_(`${g}--menu-button__container`,e),$=_(`${g}--menu-button__trigger`,{[`${g}--menu-button__trigger--open`]:I}),L=_(`${g}--menu-button__${p}`);return n.createElement("div",D({},c,{ref:v,"aria-owns":I?d:void 0,className:q}),n.createElement(ee,{ref:x.setReference,className:$,size:b,tabIndex:C,kind:h,renderIcon:Ne,disabled:l,"aria-haspopup":!0,"aria-expanded":I,onClick:F,onMouseDown:M,"aria-controls":I?d:void 0},y),n.createElement(oe,{containerRef:m,menuAlignment:p,className:L,ref:x.setFloating,id:d,legacyAutoalign:!1,label:y,mode:"basic",size:b,open:I,onClose:A,target:i},r))});le.propTypes={children:t.node.isRequired,className:t.string,disabled:t.bool,kind:t.oneOf(Oe),label:t.string.isRequired,menuAlignment:t.oneOf(["top","top-start","top-end","bottom","bottom-start","bottom-end"]),size:t.oneOf(["sm","md","lg"]),tabIndex:t.number,menuTarget:t.instanceOf(typeof Element<"u"?Element:Object)};function ze({items:w,kind:f,resource:a}){const r=ie(),[e,l]=s.useState({action:void 0,modal:{},showDialog:!1});function h(){l(i=>({...i,showDialog:!1}))}function y(){e.action(),h()}function b(i,c){c?l(u=>({...u,action:i,modal:c,showDialog:!0})):i()}function p(){const i=f==="button";if(i&&w.length===1){const{action:u,actionText:d,danger:g,icon:m,modalProperties:o}=w[0];return R.jsx(ee,{kind:g?"danger":"tertiary",onClick:()=>b(()=>u(a),o),renderIcon:m,size:"md",children:d})}const c=r.formatMessage({id:"dashboard.list.menu.tooltip",defaultMessage:"Actions"});return i?R.jsx(le,{className:"tkn--actions-dropdown",kind:"tertiary",label:c,menuAlignment:"bottom-end",size:"md",children:w.map(u=>{const{actionText:d,action:g,danger:m,disable:o,hasDivider:x,modalProperties:k}=u,S=o&&o(a);return R.jsxs(s.Fragment,{children:[x&&R.jsx(re,{}),R.jsx(j,{disabled:S,kind:m?"danger":"default",label:d,onClick:()=>b(()=>g(a),k)},d)]},d)})}):R.jsx(Ce,{align:"left","aria-label":c,className:"tkn--actions-dropdown",flipped:!0,iconDescription:c,selectorPrimaryFocus:"button:not([disabled])",title:c,children:w.map(u=>{const{actionText:d,action:g,danger:m,disable:o,hasDivider:x,modalProperties:k}=u,S=o&&o(a);return R.jsx(Ee,{disabled:S,hasDivider:x,isDelete:m,itemText:d,onClick:()=>b(()=>g(a),k),requireTitle:!0},d)})})}const C=e.showDialog?R.jsx(_e,{open:e.showDialog,modalHeading:e.modal.heading,primaryButtonText:e.modal.primaryButtonText,secondaryButtonText:e.modal.secondaryButtonText||r.formatMessage({id:"dashboard.modal.cancelButton",defaultMessage:"Cancel"}),onRequestClose:h,onRequestSubmit:y,onSecondarySubmit:h,danger:e.modal.danger,children:e.modal.body&&e.modal.body(a)}):null;return R.jsxs(R.Fragment,{children:[p(),C]})}ze.__docgenInfo={description:"",methods:[],displayName:"Actions"};export{ze as A};
