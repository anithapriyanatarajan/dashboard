import{j as I}from"./jsx-runtime-B0wN4eWF.js";import{_ as U,a as A,b as O,u as w,F as W}from"./index-CbuwW4_d.js";import{r as i}from"./index-BLsgEXh-.js";var T=60,S=60*60,b=60*60*24;function E(e){var n=Math.abs(e);return n<T?"second":n<S?"minute":n<b?"hour":"day"}function R(e){switch(e){case"second":return 1;case"minute":return T;case"hour":return S;default:return b}}function B(e,n){if(!e)return 0;switch(n){case"second":return e;case"minute":return e*T;default:return e*S}}var H=["second","minute","hour"];function m(e){return e===void 0&&(e="second"),H.indexOf(e)>-1}var L=function(e){var n=w(),a=n.formatRelativeTime,o=n.textComponent,t=e.children,r=e.value,l=e.unit,s=U(e,["children","value","unit"]),c=a(r||0,l,s);return typeof t=="function"?t(c):o?i.createElement(o,null,c):i.createElement(i.Fragment,null,c)},N=function(e){var n=e.value,a=n===void 0?0:n,o=e.unit,t=o===void 0?"second":o,r=e.updateIntervalInSeconds,l=U(e,["value","unit","updateIntervalInSeconds"]);A(!r||!!(r&&m(t)),"Cannot schedule update with unit longer than hour");var s=i.useState(),c=s[0],j=s[1],D=i.useState(0),M=D[0],C=D[1],x=i.useState(0),u=x[0],F=x[1],y;(t!==c||a!==M)&&(C(a||0),j(t),F(m(t)?B(a,t):0)),i.useEffect(function(){function d(){clearTimeout(y)}if(d(),!r||!m(t))return d;var v=u-r,V=E(v);if(V==="day")return d;var _=R(V),Y=v%_,p=v-Y,h=p>=u?p-_:p,q=Math.abs(h-u);return u!==h&&(y=setTimeout(function(){return F(h)},q*1e3)),d},[u,r,t]);var g=a||0,f=t;if(m(t)&&typeof u=="number"&&r){f=E(u);var P=R(f);g=Math.round(u/P)}return i.createElement(L,O({value:g,unit:f},l))};N.displayName="FormattedRelativeTime";const k=({date:e,formatTooltip:n=t=>t,includeSeconds:a=!1,relative:o})=>{const t=w();if(!e)return null;let r;if(o&&Intl.RelativeTimeFormat)r=I.jsx(N,{numeric:"auto",updateIntervalInSeconds:10,value:(new Date(e).getTime()-Date.now())/1e3});else{const s=new Date().getFullYear()!==new Date(e).getFullYear()?"numeric":void 0;r=I.jsx(W,{value:e,day:"numeric",month:"short",year:s,hour:"numeric",minute:"numeric",...a?{second:"numeric"}:null})}let l=t.formatDate(e,{day:"numeric",month:"long",year:"numeric",hour:"numeric",minute:"numeric",...a?{second:"numeric"}:null});return l=n(l),I.jsx("span",{title:l,children:r})};k.__docgenInfo={description:"",methods:[],displayName:"FormattedDateWrapper",props:{formatTooltip:{defaultValue:{value:"formattedDate => formattedDate",computed:!1},required:!1},includeSeconds:{defaultValue:{value:"false",computed:!1},required:!1}}};export{k as F};
