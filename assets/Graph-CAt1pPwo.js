import{j as l}from"./jsx-runtime-B0wN4eWF.js";import{R as p,r as S}from"./index-BLsgEXh-.js";import{p as _,E as A}from"./path-CxpAJ-eG.js";import{c as q}from"./index-CfoIBI3E.js";import{_ as c}from"./index-CvulwabO.js";import{c as x}from"./index-7UTgOZSF.js";import{i as B,f as I,C as M,c as V}from"./bucket-3-igrvqujs.js";import{b as W}from"./bucket-17-Dfp7XseK.js";var F=["top","left","transform","className","children","innerRef"];function k(){return k=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},k.apply(this,arguments)}function U(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}function h(n){var e=n.top,t=e===void 0?0:e,r=n.left,s=r===void 0?0:r,o=n.transform,i=n.className,a=n.children,u=n.innerRef,m=U(n,F);return p.createElement("g",k({ref:u,className:x("visx-group",i),transform:o||"translate("+s+", "+t+")"},m),a)}h.propTypes={top:c.number,left:c.number,transform:c.string,className:c.string,children:c.node,innerRef:c.oneOfType([c.string,c.func,c.object])};function $(n){var e=n.links,t=e===void 0?[]:e,r=n.linkComponent,s=n.className;return p.createElement(p.Fragment,null,t.map(function(o,i){return p.createElement(h,{key:"network-link-"+i,className:x("visx-network-link",s)},p.createElement(r,{link:o}))}))}$.propTypes={links:c.array,className:c.string};var K=["r","fill"];function g(){return g=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},g.apply(this,arguments)}function Y(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}function y(n){var e=n.r,t=e===void 0?15:e,r=n.fill,s=r===void 0?"#21D4FD":r,o=Y(n,K);return p.createElement("circle",g({r:t,fill:s},o))}y.propTypes={cx:c.number,cy:c.number};function w(n){var e=n.nodes,t=e===void 0?[]:e,r=n.nodeComponent,s=r===void 0?y:r,o=n.className,i=n.x,a=i===void 0?function(d){return d?.x||0}:i,u=n.y,m=u===void 0?function(d){return d?.y||0}:u;return p.createElement(p.Fragment,null,t.map(function(d,f){return p.createElement(h,{key:"network-node-"+f,className:x("visx-network-node",o),left:a(d),top:m(d)},p.createElement(s,{node:d}))}))}w.propTypes={nodes:c.array,className:c.string,x:c.func,y:c.func};function H(n){var e=n.link;return e!=null&&e.source&&e.target?p.createElement("line",{x1:e.source.x,y1:e.source.y,x2:e.target.x,y2:e.target.y,strokeWidth:2,stroke:"#999",strokeOpacity:.6}):null}function E(n){var e=n.graph,t=n.linkComponent,r=t===void 0?H:t,s=n.nodeComponent,o=s===void 0?y:s,i=n.top,a=n.left;return e?p.createElement(h,{top:i,left:a},p.createElement($,{links:e.links,linkComponent:r}),p.createElement(w,{nodes:e.nodes,nodeComponent:o})):null}E.propTypes={top:c.number,left:c.number};const O=n=>l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 100 100",...n,children:l.jsx("circle",{cx:"50",cy:"50",fill:"none",strokeWidth:"16",r:"32",strokeDasharray:"150.79644737231007 52.26548245743669",transform:"rotate(283.985 50 50)",children:l.jsx("animateTransform",{attributeName:"transform",type:"rotate",calcMode:"linear",values:"0 50 50;360 50 50",keyTimes:"0;1",dur:"1s",begin:"0s",repeatCount:"indefinite"})})});O.__docgenInfo={description:"",methods:[],displayName:"InlineLoading"};class b extends S.Component{handleClick=()=>{this.props.onClick(this.props.label)};handleClickStep=e=>{this.props.onClickStep(this.props.label,e)};render(){const{children:e,edges:t,height:r,id:s,isSelected:o,status:i,type:a,width:u,label:m=a}=this.props;let d;if(a==="Task"||i==="error"){switch(i){case"error":d=V;break;case"running":d=O;break;case"success":d=M;break;default:d=W}d=l.jsx(d,{className:"status-icon",x:"8",y:"5"})}const f=19;let v=m;if(m.length>f){const j=f-1,G=m.substring(0,Math.ceil(j/2)),R=m.substring(m.length-Math.floor(j/2));v=`${G}â€¦${R}`}let N={textAnchor:"start",x:36,y:20};(a==="Start"||a==="End")&&(N={dominantBaseline:"middle",textAnchor:"middle",x:"50%",y:"50%"});const L={x:o?0:1,y:o?0:1,width:o?u:u-2,height:o?30:28},P=e?B:I,D=q(a,{expanded:e,collapsed:!e,selected:o});return l.jsx("svg",{height:r,width:u,viewBox:`0 0 ${u} ${r}`,"data-status":i,className:D,children:l.jsxs("g",{children:[l.jsx("rect",{width:u,height:r}),l.jsxs("g",{className:"label",onClick:this.handleClick,children:[l.jsx("title",{children:m}),a!=="Start"&&a!=="End"&&l.jsx("rect",{className:"label-hitbox",...L}),d,l.jsx("text",{...N,children:v}),a==="Task"&&l.jsx(P,{className:"chevron",x:u-28,y:"5"})]}),e&&l.jsx(C,{graph:{id:`${s}_subgraph`,children:e,edges:t},isSubGraph:!0,onClickStep:this.handleClickStep})]})})}}b.defaultProps={height:100,onClick:()=>{},onClickStep:()=>{},width:100};b.__docgenInfo={description:"",methods:[{name:"handleClick",docblock:null,modifiers:[],params:[],returns:null},{name:"handleClickStep",docblock:null,modifiers:[],params:[{name:"stepName",optional:!1,type:null}],returns:null}],displayName:"Node",props:{height:{defaultValue:{value:"100",computed:!1},required:!1},onClick:{defaultValue:{value:"() => {}",computed:!1},required:!1},onClickStep:{defaultValue:{value:"() => {}",computed:!1},required:!1},width:{defaultValue:{value:"100",computed:!1},required:!1}}};const T=({link:n})=>{const e=n.sections[0],t=_(),{x:r,y:s}=e.startPoint,{x:o,y:i}=e.endPoint,a=.5;return t.moveTo(r,s),t.lineTo(r,s+(i-s)*a),t.lineTo(o,s+(i-s)*a),t.lineTo(o,i-1),l.jsx("path",{strokeWidth:1,fill:"none",strokeOpacity:1,d:t.toString()})};T.__docgenInfo={description:"",methods:[],displayName:"NodeLink"};class C extends S.Component{state={};componentDidMount(){this.layout()}componentDidUpdate(e){const{graph:t}=this.props,{graph:r}=e;t!==r&&this.layout()}layout=()=>{const{graph:e,isSubGraph:t}=this.props;new A({defaultLayoutOptions:{"org.eclipse.elk.algorithm":t?"org.eclipse.elk.box":"org.eclipse.elk.layered","org.eclipse.elk.direction":"DOWN","org.eclipse.elk.edgeRouting":"ORTHOGONAL","org.eclipse.elk.layered.nodePlacement.bk.fixedAlignment":"BALANCED","org.eclipse.elk.layered.nodePlacement.strategy":"BRANDES_KOEPF","org.eclipse.elk.layered.spacing.nodeNodeBetweenLayers":t?0:40,"org.eclipse.elk.padding":"[top=30,left=0,bottom=1,right=0]","org.eclipse.elk.separateConnectedComponents":!1,"org.eclipse.elk.spacing.nodeNode":t?0:40}}).layout(e).then(s=>{this.setState({links:s.edges,nodes:s.children,width:s.width,height:s.height})}).catch(console.error)};render(){const{isSubGraph:e,onClickStep:t,onClickTask:r}=this.props,{height:s,links:o,nodes:i,width:a}=this.state;return i?l.jsxs("svg",{className:"graph",height:s,width:a,viewBox:`0 0 ${a} ${s}`,preserveAspectRatio:"xMidYMin meet",children:[!e&&l.jsx("defs",{children:l.jsx("marker",{id:"edge-arrow",markerUnits:"userSpaceOnUse",markerWidth:"7.5",markerHeight:"8",orient:"auto",refY:"4",refX:"7",children:l.jsx("path",{d:"M0 0v8l7-4z"})})}),l.jsx(E,{graph:{links:o,nodes:i},nodeComponent:u=>l.jsx(b,{onClick:e?t:r,onClickStep:e?void 0:t,...u.node}),linkComponent:e?()=>null:T})]}):null}}C.defaultProps={isSubGraph:!1,onClickStep:()=>{},onClickTask:()=>{}};C.__docgenInfo={description:"",methods:[{name:"layout",docblock:null,modifiers:[],params:[],returns:null}],displayName:"Graph",props:{isSubGraph:{defaultValue:{value:"false",computed:!1},required:!1},onClickStep:{defaultValue:{value:"() => {}",computed:!1},required:!1},onClickTask:{defaultValue:{value:"() => {}",computed:!1},required:!1}}};export{C as G,b as N};
