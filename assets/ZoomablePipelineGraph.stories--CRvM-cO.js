import{j as i}from"./jsx-runtime-B0wN4eWF.js";import{a as y}from"./chunk-D5ZWXAHU-BihnyLEY.js";import{R as l,r as f}from"./index-BLsgEXh-.js";import{u as N}from"./index-CbuwW4_d.js";import"./usePrefix-DVhi0s40.js";import{B as m}from"./Button-DXQXyzWq.js";import{P as X,t as Y,a as H,p as F,b as U}from"./tasks-CLlH_my3.js";import{a as W}from"./bucket-4-BNyHiU9t.js";import{c as q}from"./bucket-11-CJvd3vIe.js";import{I as d}from"./Icon-Dlg6_ItC.js";import"./index-DS1rTf2F.js";import"./v4-CtRu48qb.js";import"./index-Cn2DnnuS.js";import"./index-CTl86HqP.js";import"./index-yR6ZHKQV.js";import"./index-CvulwabO.js";import"./index-mhCn_TNf.js";import"./index-7UTgOZSF.js";import"./Tooltip-wylFaEsh.js";import"./index-DN2bqo_D.js";import"./keys-fZP-1wUt.js";import"./events-OVwOsPzJ.js";import"./index-CfoIBI3E.js";import"./Graph-CAt1pPwo.js";import"./path-CxpAJ-eG.js";import"./bucket-3-igrvqujs.js";import"./bucket-17-Dfp7XseK.js";var S,k,w,v,C,M,E,b;const J=l.forwardRef(function(e,n){let{children:o,size:r=16,...s}=e;return r===16||r==="16"||r==="16px"?l.createElement(d,{width:r,height:r,ref:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",...s},S||(S=l.createElement("path",{d:"M9 6L7 6 7 4 6 4 6 6 4 6 4 7 6 7 6 9 7 9 7 7 9 7z"})),k||(k=l.createElement("path",{d:"M10.7,10C11.5,9,12,7.8,12,6.5C12,3.5,9.5,1,6.5,1S1,3.5,1,6.5S3.5,12,6.5,12c1.3,0,2.5-0.5,3.5-1.3l3.8,3.8l0.7-0.7 L10.7,10z M6.5,11C4,11,2,9,2,6.5S4,2,6.5,2S11,4,11,6.5S9,11,6.5,11L6.5,11z"})),o):l.createElement(d,{width:r,height:r,ref:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",...s},w||(w=l.createElement("path",{d:"M18 12L14 12 14 8 12 8 12 12 8 12 8 14 12 14 12 18 14 18 14 14 18 14 18 12z"})),v||(v=l.createElement("path",{d:"M21.4479,20A10.856,10.856,0,0,0,24,13,11,11,0,1,0,13,24a10.856,10.856,0,0,0,7-2.5521L27.5859,29,29,27.5859ZM13,22a9,9,0,1,1,9-9A9.01,9.01,0,0,1,13,22Z"})),o)}),K=l.forwardRef(function(e,n){let{children:o,size:r=16,...s}=e;return r===16||r==="16"||r==="16px"?l.createElement(d,{width:r,height:r,ref:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",...s},C||(C=l.createElement("path",{d:"M4 6H9V7H4z"})),M||(M=l.createElement("path",{d:"M10.7,10C11.5,9,12,7.8,12,6.5C12,3.5,9.5,1,6.5,1S1,3.5,1,6.5S3.5,12,6.5,12c1.3,0,2.5-0.5,3.5-1.3l3.8,3.8l0.7-0.7 L10.7,10z M6.5,11C4,11,2,9,2,6.5S4,2,6.5,2S11,4,11,6.5S9,11,6.5,11L6.5,11z"})),o):l.createElement(d,{width:r,height:r,ref:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",...s},E||(E=l.createElement("path",{d:"M8 12H18V14H8z"})),b||(b=l.createElement("path",{d:"M21.4479,20A10.856,10.856,0,0,0,24,13,11,11,0,1,0,13,24a10.856,10.856,0,0,0,7-2.5521L27.5859,29,29,27.5859ZM13,22a9,9,0,1,1,9-9A9.01,9.01,0,0,1,13,22Z"})),o)});var z=function(){function t(n){var o=n.x,r=o===void 0?0:o,s=n.y,a=s===void 0?0:s;this.x=0,this.y=0,this.x=r,this.y=a}var e=t.prototype;return e.value=function(){return{x:this.x,y:this.y}},e.toArray=function(){return[this.x,this.y]},t}();function Q(t){return!!t&&t instanceof Element}function tt(t){return!!t&&(t instanceof SVGElement||"ownerSVGElement"in t)}function et(t){return!!t&&"createSVGPoint"in t}function nt(t){return!!t&&"getScreenCTM"in t}function ot(t){return!!t&&"changedTouches"in t}function rt(t){return!!t&&"clientX"in t}function st(t){return!!t&&(t instanceof Event||"nativeEvent"in t&&t.nativeEvent instanceof Event)}function h(){return h=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},h.apply(this,arguments)}var g={x:0,y:0};function it(t){if(!t)return h({},g);if(ot(t))return t.changedTouches.length>0?{x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY}:h({},g);if(rt(t))return{x:t.clientX,y:t.clientY};var e=t?.target,n=e&&"getBoundingClientRect"in e?e.getBoundingClientRect():null;return n?{x:n.x+n.width/2,y:n.y+n.height/2}:h({},g)}function P(t,e){if(!t||!e)return null;var n=it(e),o=tt(t)?t.ownerSVGElement:t,r=nt(o)?o.getScreenCTM():null;if(et(o)&&r){var s=o.createSVGPoint();return s.x=n.x,s.y=n.y,s=s.matrixTransform(r.inverse()),new z({x:s.x,y:s.y})}var a=t.getBoundingClientRect();return new z({x:n.x-a.left-t.clientLeft,y:n.y-a.top-t.clientTop})}function Z(t,e){if(Q(t)&&e)return P(t,e);if(st(t)){var n=t,o=n.target;if(o)return P(o,n)}return null}const j={dragging:!1,scale:1,translate:{x:0,y:0}};class T extends f.Component{state=j;reset=()=>{this.setState(j)};center=()=>{this.setState({translate:{x:0,y:0}})};zoomIn=()=>{const{scale:e}=this.state;this.setZoom(e*1.25)};zoomOut=()=>{const{scale:e}=this.state;this.setZoom(e*.8)};zoomScroll=e=>{e.preventDefault(),e.deltaY>0?this.zoomIn():this.zoomOut()};setZoom=e=>{const{maxZoom:n,minZoom:o}=this.props,r=Math.min(Math.max(o,e),n);this.setState({scale:r})};dragStart=e=>{this.setState({dragging:!0}),this.startPoint=Z(this.props.svg(),e),this.startTranslate=this.state.translate};dragEnd=()=>{this.setState({dragging:!1})};dragMove=e=>{if(!this.state.dragging)return;const n=Z(this.props.svg(),e),o=n.x-this.startPoint.x,r=n.y-this.startPoint.y;this.setState(s=>({translate:{x:this.startTranslate.x+o/s.scale,y:this.startTranslate.y+r/s.scale}}))};render(){const{width:e,height:n,children:o}=this.props,{translate:r,scale:s}=this.state,a={x:e/2,y:n/2},u={x:r.x*s+a.x-a.x*s,y:r.y*s+a.y-a.y*s};return o({scale:s,translate:u,dragStart:this.dragStart,dragMove:this.dragMove,dragEnd:this.dragEnd,zoomIn:this.zoomIn,zoomOut:this.zoomOut,zoomScroll:this.zoomScroll,setZoom:this.setZoom,reset:this.reset,center:this.center})}}T.__docgenInfo={description:"",methods:[{name:"reset",docblock:null,modifiers:[],params:[],returns:null},{name:"center",docblock:null,modifiers:[],params:[],returns:null},{name:"zoomIn",docblock:null,modifiers:[],params:[],returns:null},{name:"zoomOut",docblock:null,modifiers:[],params:[],returns:null},{name:"zoomScroll",docblock:null,modifiers:[],params:[{name:"event",optional:!1,type:null}],returns:null},{name:"setZoom",docblock:null,modifiers:[],params:[{name:"scale",optional:!1,type:null}],returns:null},{name:"dragStart",docblock:null,modifiers:[],params:[{name:"event",optional:!1,type:null}],returns:null},{name:"dragEnd",docblock:null,modifiers:[],params:[],returns:null},{name:"dragMove",docblock:null,modifiers:[],params:[{name:"event",optional:!1,type:null}],returns:null}],displayName:"PanZoom"};const at=300,lt=600,_=.1,I=10;function R(t){const e=N(),n=f.useRef(),[o,r]=f.useState(!1);function s(){r(a=>!a)}return i.jsx(T,{svg:()=>n.current,minZoom:_,maxZoom:I,width:at,height:lt,children:({translate:a,scale:u,dragStart:G,dragMove:O,dragEnd:D,zoomIn:x,zoomOut:V,zoomScroll:A,setZoom:L,center:B,reset:$})=>i.jsxs("div",{className:"pipeline-graph-zoom-container",children:[i.jsx("svg",{width:"100%",height:"100%",ref:n,onWheel:A,...o?{onMouseDown:G,onMouseUp:D,onMouseMove:O}:null,onDoubleClick:x,children:i.jsx("g",{draggable:!0,transform:`translate(${a.x},${a.y}) scale(${u},${u})`,children:i.jsx(X,{...t})})}),i.jsxs("div",{className:"toolbar",children:[i.jsx(m,{disabled:!o,iconDescription:e.formatMessage({id:"dashboard.graph.select",defaultMessage:"Select"}),kind:"ghost",onClick:s,renderIcon:c=>i.jsx(W,{size:20,...c})}),i.jsx(m,{disabled:o,iconDescription:e.formatMessage({id:"dashboard.graph.pan",defaultMessage:"Pan"}),kind:"ghost",onClick:s,renderIcon:c=>i.jsx(q,{size:20,...c})}),i.jsx(m,{kind:"ghost",onClick:$,children:"Reset"}),i.jsx(m,{kind:"ghost",onClick:B,children:"Center"}),i.jsx(m,{disabled:!1,hasIconOnly:!0,iconDescription:e.formatMessage({id:"dashboard.graph.zoomOut",defaultMessage:"Zoom out"}),kind:"ghost",onClick:V,renderIcon:c=>i.jsx(K,{size:20,...c}),tooltipPosition:"top",tooltipAlignment:"end"}),i.jsx("input",{type:"range",min:_,max:I,value:u,step:".1",onChange:c=>L(c.target.value)}),i.jsx(m,{disabled:!1,hasIconOnly:!0,iconDescription:e.formatMessage({id:"dashboard.graph.zoomIn",defaultMessage:"Zoom in"}),kind:"ghost",onClick:x,renderIcon:c=>i.jsx(J,{size:20,...c}),tooltipPosition:"top",tooltipAlignment:"end"})]})]})})}R.__docgenInfo={description:"",methods:[],displayName:"ZoomablePipelineGraph"};const Ot={title:"legacy/ZoomablePipelineGraph"},p=()=>i.jsx(R,{onClickStep:y("onClickStep"),onClickTask:y("onClickTask"),pipeline:U,pipelineRun:F,taskRuns:H,tasks:Y});p.__docgenInfo={description:"",methods:[],displayName:"Default"};p.parameters={...p.parameters,docs:{...p.parameters?.docs,source:{originalSource:"() => <ZoomablePipelineGraph onClickStep={action('onClickStep')} onClickTask={action('onClickTask')} pipeline={pipeline} pipelineRun={pipelineRun} taskRuns={taskRuns} tasks={tasks} />",...p.parameters?.docs?.source}}};const Dt=["Default"];export{p as Default,Dt as __namedExportsOrder,Ot as default};
