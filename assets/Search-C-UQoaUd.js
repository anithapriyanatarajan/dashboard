import{u as ee,_ as ae,d as te}from"./index-Cn2DnnuS.js";import{c as T}from"./index-7UTgOZSF.js";import{_ as e}from"./index-CvulwabO.js";import{R as r,r as u}from"./index-BLsgEXh-.js";import{u as N}from"./usePrefix-DVhi0s40.js";import{c as v}from"./events-OVwOsPzJ.js";import{b as ne}from"./index-DN2bqo_D.js";import{F as re}from"./FormContext-D3yeToZb.js";import{m as b,b as oe,S as se,E as ce}from"./keys-fZP-1wUt.js";import{a as le}from"./bucket-3-igrvqujs.js";import{S as ie}from"./bucket-14-DcJR6G3p.js";function ue(i){const o=i.current||i;o&&o.focus&&document.activeElement!==o&&o.focus()}var I;const R=r.forwardRef(function(o,d){let{autoComplete:D="off",className:K,closeButtonLabelText:g="Clear search input",defaultValue:x,disabled:m,isExpanded:c=!0,id:V,labelText:O,light:P,onChange:C=()=>{},onClear:_=()=>{},onKeyDown:B,onExpand:a,placeholder:E="Search",renderIcon:F,role:j="searchbox",size:p="md",type:k="text",value:s,...q}=o;const z=!!(s||x),t=N(),{isFluid:H}=u.useContext(re),l=u.useRef(null),L=ne([d,l]),y=u.useRef(null),M=ee("search-input"),f=V||M,$=`${f}-search`,[A,h]=u.useState(z||!1),[G,J]=u.useState(s),Q=T({[`${t}--search`]:!0,[`${t}--search--sm`]:p==="sm",[`${t}--search--md`]:p==="md",[`${t}--search--lg`]:p==="lg",[`${t}--search--light`]:P,[`${t}--search--disabled`]:m,[`${t}--search--fluid`]:H},K),U=T({[`${t}--search-close`]:!0,[`${t}--search-close--hidden`]:!A||!c});s!==G&&(h(!!s),J(s));function S(){!s&&l.current&&(l.current.value="");const Z={target:Object.assign({},l.current,{value:""}),type:"change"};C(Z),_(),h(!1),ue(l)}function W(n){h(n.target.value!=="")}function X(n){b(n,ce)&&(n.stopPropagation(),l.current?.value?S():a&&c&&y.current?.focus())}function Y(n){(b(n,oe)||b(n,se))&&(n.stopPropagation(),a&&a(n))}return r.createElement("div",{role:"search","aria-label":E,className:Q},r.createElement("div",{"aria-label":a?"button":void 0,"aria-labelledby":a?$:void 0,role:a?"button":void 0,className:`${t}--search-magnifier`,onClick:a,onKeyDown:Y,tabIndex:a&&!c?0:-1,ref:y,"aria-expanded":a&&c?!0:a&&!c?!1:void 0,"aria-controls":a?f:void 0},r.createElement(w,{icon:F})),r.createElement("label",{id:$,htmlFor:f,className:`${t}--label`},O),r.createElement("input",ae({autoComplete:D,className:`${t}--search-input`,defaultValue:x,disabled:m,role:j,ref:L,id:f,onChange:v([C,W]),onKeyDown:v([B,X]),placeholder:E,type:k,value:s,tabIndex:a&&!c?-1:void 0},q)),r.createElement("button",{"aria-label":g,className:U,disabled:m,onClick:S,title:g,type:"button"},I||(I=r.createElement(le,null))))});R.displayName="Search";R.propTypes={autoComplete:e.string,className:e.string,closeButtonLabelText:e.string,defaultValue:e.oneOfType([e.string,e.number]),disabled:e.bool,id:e.string,isExpanded:e.bool,labelText:e.node.isRequired,light:te(e.bool),onChange:e.func,onClear:e.func,onExpand:e.func,onKeyDown:e.func,placeholder:e.string,renderIcon:e.oneOfType([e.func,e.object]),role:e.string,size:e.oneOf(["sm","md","lg"]),type:e.string,value:e.oneOfType([e.string,e.number])};function w(i){let{icon:o}=i;const d=N();return o?r.createElement(o,{className:`${d}--search-magnifier-icon`}):r.createElement(ie,{className:`${d}--search-magnifier-icon`})}w.propTypes={icon:e.oneOfType([e.func,e.object])};export{R as S};
